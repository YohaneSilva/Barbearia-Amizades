{% extends 'minha-conta/base.html' %}
{% load static %}
{% block title %} Barbearia Amizades S & D{% endblock %}
{% block module_title %}Gestão de Conta{% endblock %}
{% block content %}
<div class="container-fluid">
<!-- Botão pra atualizar a página -->
  <button class="btn btn-primary module-title" aria-label="Botão para atualizar tabela de usuários cadastrados" id="btnRefreshPage" title="Recarregar tabela de usuários">
      Atualizar Tabela
  </button>

{% comment %} <!-- Botão pra redirecionar para tela de cadastro -->
  <a class="btn btn-outline-secondary module-title" href="{% url 'cadastrarUsuario' %}" aria-label="Botão para redirecionar para o cadastro de usuário" title="Ir para Cadastro de Usuário">
    Cadastrar Usuário
  </a> {% endcomment %}
  
  <div id="listingTable">
    <table class="table table-striped table-light text-center" id="tableInstitute">
      <thead>
        <tr>
          <th scope="col">Última Alteração</th>
          <th scope="col">CNPJ</th>
          <th scope="col">Razão Social</th>
          <th scope="col">Nome Fantasia</th>
          <th scope="col">CEP</th>
          <th scope="col">Logradouro</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for valor in estab_cadastrado %}
          <tr data-toggle="modal" data-target="#modaEditDeleteUser">
            <td class="align-middle" scope="row">{{ valor.estab_alter_data }}</td>
            <td class="align-middle">{{ valor.estab_cnpj }}</td>
            <td class="align-middle">{{ valor.estab_razao_social }}</td>
            <td class="align-middle">{{ valor.estab_nome_fantasia }}</td>
            <td class="align-middle">{{ valor.estab_end_cep }}</td>
            <td class="align-middle">
              {{ valor.estab_end_logradouro }}, {{ valor.estab_end_numero }}, {{ valor.estab_end_complemento }} - {{ valor.estab_end_bairro }} <br> {{ valor.estab_end_cidade }} - {{ valor.estab_end_uf }}
            </td>
            <td class="align-middle">
              <a href="http://127.0.0.1:8000/minhaconta/conta/1/editar/estabelecimento">
                <button type="button" class="btn btn-info" id="btnEditCompany" title="Editar estabelecimento" aria-label="Botão para editar o estabelecimento">
                  <i class="fas fa-edit"></i>
                </button>
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  
    <table class="table table-striped table-dark table-hover text-center" id="tableAllResults">
      <thead>
        <tr>
          <th scope="col">Código</th>
          <th scope="col">Nome</th>
          <th scope="col">Usuário</th>
          <th scope="col">E-mail</th>
          <th scope="col">Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for valor in usuarios_cadastrados %}
          <tr data-toggle="modal" data-target="#modaEditDeleteUser">
            <td class="align-middle" scope="row" id="codeUser">{{ valor.id }}</td>
            <td class="align-middle">{{ valor.us_nome }}</td>
            <td class="align-middle">{{ valor.us_usuario }}</td>
            <td class="align-middle">{{ valor.us_email }}</td>
            <td class="align-middle">
              <button type="button" class="btn btn-info" id="btnEditUser" title="Editar usuário" aria-label="Botão para editar um usuário cadastrado">
                <i class="fas fa-edit"></i>
              </button>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}